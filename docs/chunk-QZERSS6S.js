import{a as h}from"./chunk-52IOWIGI.js";import{B as a,E as s,I as m,J as u,e as c,eb as l,z as i}from"./chunk-T55SLVJJ.js";var f=(()=>{let t=class{constructor(){this.nombre=u(localStorage.getItem("userName")),this.nameToke=m(()=>` ${this.nombre()} test`)}saveToken(e){localStorage.setItem("token",e)}saveNamUSe(e){this.nombre.set(e),localStorage.setItem("userName",e)}getToken(){return localStorage.getItem("token")}clearToken(){localStorage.removeItem("token"),localStorage.removeItem("userName")}},o=t;return(()=>{t.\u0275fac=function(r){return new(r||t)}})(),(()=>{t.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})})(),o})();var N=(()=>{let t=class{constructor(){this.http=s(l),this.tokenService=s(f),this.authState=new c(null),this.authState$=this.authState.asObservable()}login(e,r){let p=`${h.API_URL}/auth/login`;return this.http.post(p,{email:e,clave:r}).pipe(i(n=>{this.tokenService.saveToken(n.access_token),this.tokenService.saveNamUSe(n.user.nombre),this.authState.next(n.user.nombre)}),i(n=>{this.authState.next(n.user)}))}setAuthState(e){this.authState.next(e)}getProfile(){return this.tokenService.nombre}logout(){this.tokenService.clearToken()}},o=t;return(()=>{t.\u0275fac=function(r){return new(r||t)}})(),(()=>{t.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})})(),o})();export{f as a,N as b};
