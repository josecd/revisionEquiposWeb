import{a as Le,b as F,c as W}from"./chunk-XFQ6HXOA.js";import{a as v}from"./chunk-52IOWIGI.js";import{A as Me,B as De,C as be,D as Ee,E as Te,F as we,G as Y,H as Re,I as ke,J as Oe,a as re,t as he,u as _e,w as ve,x as xe,y as Ae,z as ye}from"./chunk-X4YY7POZ.js";import{B as O,Bc as le,Ca as Z,D as T,E as $,F as G,Fa as M,Ga as D,Gc as pe,Kc as se,L as w,M as I,Nc as U,Qc as me,U as J,Wc as ce,Xa as ee,Ya as te,Z as p,bb as ie,cb as ne,cd as de,da as s,ea as B,eb as ae,ed as ue,fa as u,ga as l,ha as r,hd as fe,ia as E,ja as g,jd as ge,ka as C,kd as Ce,ld as Se,ma as P,na as y,oc as R,pa as S,pc as L,qc as H,sd as Ie,va as m,vd as Pe,wa as Q,wb as oe,xa as f,ya as K}from"./chunk-T55SLVJJ.js";import{f as V,g as q}from"./chunk-SFCFV3AH.js";var Fe=(()=>{let i=class{constructor(e){this._httpClient=e}getReportes(){return this._httpClient.get(v.API_URL+"/reportes")}getReporteID(e){return this._httpClient.get(v.API_URL+`/reportes/${e}/alto`)}verPDF(e,n){let o,d;n=="Recorrido"?d=v.API_URL+"/reportes/pdf/view/"+e:n=="Baja"?d=v.API_URL+"/reportes/pdf/view/"+e+"/Baja":n=="Mantenimiento"&&(d=v.API_URL+"/reportes/pdf/view/"+e+"/Mantenimiento"),window.open(d,"_blank")}descargarPDF(e){let n=v.API_URL+`/reportes/${e}/pdfReporte`;window.open(n,"_blank")}hotelesLista(){return this._httpClient.get(v.API_URL+"/hoteles")}reportesFiltro(e){return this._httpClient.post(v.API_URL+"/reportes/filter2",e)}reportesFiltroexs(e){return this._httpClient.post(v.API_URL+"/reportes/filterExcel",e)}},t=i;return(()=>{i.\u0275fac=function(n){return new(n||i)(T(ae))}})(),(()=>{i.\u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})})(),t})();var We=V(W());var Be=V(W(),1),Ne=V(W(),1),b=Ne.default||Be,j=new J("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:He});function He(){return{useUtc:!1}}function Ue(t,i){let a=Array(t);for(let e=0;e<t;e++)a[e]=i(e);return a}var Ve=(()=>{let i=class extends L{constructor(e,n){super(),this._options=n,this.setLocale(e||b.locale())}setLocale(e){super.setLocale(e);let n=b.localeData(e);this._localeData={firstDayOfWeek:n.firstDayOfWeek(),longMonths:n.months(),shortMonths:n.monthsShort(),dates:Ue(31,o=>this.createDate(2017,0,o+1).format("D")),longDaysOfWeek:n.weekdays(),shortDaysOfWeek:n.weekdaysShort(),narrowDaysOfWeek:n.weekdaysMin()}}getYear(e){return this.clone(e).year()}getMonth(e){return this.clone(e).month()}getDate(e){return this.clone(e).date()}getDayOfWeek(e){return this.clone(e).day()}getMonthNames(e){return e=="long"?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(e){return e=="long"?this._localeData.longDaysOfWeek:e=="short"?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(e){return this.clone(e).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(e){return this.clone(e).daysInMonth()}clone(e){return e.clone().locale(this.locale)}createDate(e,n,o){let d=this._createMoment({year:e,month:n,date:o}).locale(this.locale);return d.isValid(),d}today(){return this._createMoment().locale(this.locale)}parse(e,n){return e&&typeof e=="string"?this._createMoment(e,n,this.locale):e?this._createMoment(e).locale(this.locale):null}format(e,n){return e=this.clone(e),this.isValid(e),e.format(n)}addCalendarYears(e,n){return this.clone(e).add({years:n})}addCalendarMonths(e,n){return this.clone(e).add({months:n})}addCalendarDays(e,n){return this.clone(e).add({days:n})}toIso8601(e){return this.clone(e).format()}deserialize(e){let n;if(e instanceof Date)n=this._createMoment(e).locale(this.locale);else if(this.isDateInstance(e))return this.clone(e);if(typeof e=="string"){if(!e)return null;n=this._createMoment(e,b.ISO_8601).locale(this.locale)}return n&&this.isValid(n)?this._createMoment(n).locale(this.locale):super.deserialize(e)}isDateInstance(e){return b.isMoment(e)}isValid(e){return this.clone(e).isValid()}invalid(){return b.invalid()}_createMoment(e,n,o){let{strict:d,useUtc:_}=this._options||{};return _?b.utc(e,n,o,d):b(e,n,o,d)}},t=i;return(()=>{i.\u0275fac=function(n){return new(n||i)(T(R,8),T(j,8))}})(),(()=>{i.\u0275prov=O({token:i,factory:i.\u0275fac})})(),t})();function je(t,i){if(t&1&&(l(0,"span",31),m(1),r()),t&2){let a=S();p(1),K(" (+",((a.toppings.value==null?null:a.toppings.value.length)||0)-1," ",(a.toppings.value==null?null:a.toppings.value.length)===2?"otro":"otros",") ")}}function Xe(t,i){if(t&1&&(l(0,"mat-option",32),m(1),r()),t&2){let a=i.$implicit;u("value",a),p(1),Q(a.nombre)}}function ze(t,i){t&1&&(l(0,"th",34),m(1," Assigned "),r())}function qe(t,i){if(t&1&&(l(0,"td",35)(1,"div",36)(2,"div",37)(3,"h6",38),m(4),r(),l(5,"span",39),m(6),r()()()()),t&2){let a=i.$implicit;p(4),f(" ",a.uname," "),p(2),f(" ",a.position," ")}}function Ge(t,i){t&1&&(l(0,"th",34),m(1," ID "),r())}function Je(t,i){if(t&1&&(l(0,"td",40),m(1),r()),t&2){let a=i.$implicit;p(1),f(" ",a.idReporte," ")}}function Qe(t,i){t&1&&(l(0,"th",34),m(1," Name "),r())}function Ke(t,i){if(t&1&&(l(0,"td",40),m(1),r()),t&2){let a=i.$implicit;p(1),f(" ",a.productName," ")}}function Ze(t,i){t&1&&(l(0,"th",34),m(1," Priority "),r())}function et(t,i){if(t&1&&(l(0,"span",42),m(1),M(2,"titlecase"),r()),t&2){let a=S().$implicit;p(1),f(" ",D(2,1,a.priority)," ")}}function tt(t,i){if(t&1&&(l(0,"span",43),m(1),M(2,"titlecase"),r()),t&2){let a=S().$implicit;p(1),f(" ",D(2,1,a.priority)," ")}}function it(t,i){if(t&1&&(l(0,"span",44),m(1),M(2,"titlecase"),r()),t&2){let a=S().$implicit;p(1),f(" ",D(2,1,a.priority)," ")}}function nt(t,i){if(t&1&&(l(0,"span",45),m(1),M(2,"titlecase"),r()),t&2){let a=S().$implicit;p(1),f(" ",D(2,1,a.priority)," ")}}function at(t,i){if(t&1&&(l(0,"span",46),m(1),M(2,"titlecase"),r()),t&2){let a=S().$implicit;p(1),f(" ",D(2,1,a.priority)," ")}}function ot(t,i){if(t&1&&(l(0,"td",35),s(1,et,3,3,"ng-template",41),s(2,tt,3,3,"ng-template",41),s(3,it,3,3,"ng-template",41),s(4,nt,3,3,"ng-template",41),s(5,at,3,3,"ng-template",41),r()),t&2){let a=i.$implicit;p(1),u("ngIf",a.priority=="low"),p(1),u("ngIf",a.priority=="medium"),p(1),u("ngIf",a.priority=="high"),p(1),u("ngIf",a.priority=="critical"),p(1),u("ngIf",a.priority=="moderate")}}function rt(t,i){t&1&&(l(0,"th",34),m(1," Budget "),r())}function lt(t,i){if(t&1&&(l(0,"td",40),m(1),r()),t&2){let a=i.$implicit;p(1),f(" $",a.budget,"k ")}}function pt(t,i){t&1&&E(0,"tr",47)}function st(t,i){t&1&&E(0,"tr",48)}function mt(t,i){if(t&1&&(l(0,"div",15)(1,"mat-card",0)(2,"mat-card-content",1)(3,"mat-card-title"),m(4,"Recorridos"),r(),l(5,"div",16)(6,"table",33),g(7,24),s(8,ze,2,0,"th",22),s(9,qe,7,2,"td",20),C(),g(10,21),s(11,Ge,2,0,"th",22),s(12,Je,2,1,"td",23),C(),g(13,25),s(14,Qe,2,0,"th",22),s(15,Ke,2,1,"td",23),C(),g(16,26),s(17,Ze,2,0,"th",22),s(18,ot,6,5,"td",20),C(),g(19,27),s(20,rt,2,0,"th",22),s(21,lt,2,1,"td",23),C(),s(22,pt,1,0,"tr",29),s(23,st,1,0,"tr",30),r()()()()()),t&2){let a=S();p(6),u("dataSource",a.dataSource2),p(16),u("matHeaderRowDef",a.displayedColumns),p(1),u("matRowDefColumns",a.displayedColumns)}}function ct(t,i){if(t&1){let a=P();l(0,"th",49)(1,"mat-checkbox",50),y("change",function(n){w(a);let o=S();return I(n?o.toggleAllRows():null)}),r()()}if(t&2){let a=S();p(1),u("checked",a.selection.hasValue()&&a.isAllSelected())("indeterminate",a.selection.hasValue()&&!a.isAllSelected())("aria-label",a.checkboxLabel())}}function dt(t,i){if(t&1){let a=P();l(0,"td",35)(1,"mat-checkbox",51),y("click",function(n){return n.stopPropagation()})("change",function(n){let d=w(a).$implicit,_=S();return I(n?_.selection.toggle(d):null)}),r()()}if(t&2){let a=i.$implicit,e=S();p(1),u("checked",e.selection.isSelected(a))("aria-label",e.checkboxLabel(a))}}function ut(t,i){t&1&&(l(0,"th",34),m(1," ID "),r())}function ft(t,i){if(t&1&&(l(0,"td",40),m(1),r()),t&2){let a=i.$implicit;p(1),f(" ",a.idReporte," ")}}function ht(t,i){t&1&&(l(0,"th",34),m(1," Tipo "),r())}function _t(t,i){if(t&1&&(l(0,"td",40),m(1),r()),t&2){let a=i.$implicit;p(1),f(" ",a.tipoReporte," ")}}function gt(t,i){t&1&&(l(0,"th",34),m(1," Descripci\xF3n "),r())}function Ct(t,i){if(t&1&&(l(0,"td",40),m(1),r()),t&2){let a=i.$implicit;p(1),f(" ",a.descripcion," ")}}function St(t,i){t&1&&(l(0,"th",34),m(1," Hotel "),r())}function vt(t,i){if(t&1&&(l(0,"td",40),m(1),r()),t&2){let a=i.$implicit;p(1),f(" ",a.hoteles.nombre," ")}}function xt(t,i){t&1&&(l(0,"th",34),m(1," Fecha "),r())}function At(t,i){if(t&1&&(l(0,"td",40),m(1),M(2,"date"),r()),t&2){let a=i.$implicit;p(1),f(" ",D(2,1,a.fechaRegistro)," ")}}function yt(t,i){t&1&&(l(0,"th",49),m(1," Details "),r())}function Mt(t,i){if(t&1){let a=P();l(0,"td",35)(1,"button",52),y("click",function(){let o=w(a).$implicit,d=S();return I(d.getRecord(o))}),m(2,"Ver"),r()()}}function Dt(t,i){t&1&&E(0,"tr",47)}function bt(t,i){t&1&&E(0,"tr",48)}var X=We,Et={parse:{dateInput:"MM/YYYY"},display:{dateInput:"MM/YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}},li=(()=>{let i=class{constructor(){this._reporte=$(Fe),this.router=$(oe),this.displayedColumns=["select","id","assigned","name","priority","budget","accion"],this.displayedColumnsReporte=["select","usuario","descripcion","hotel","fechaRegistro"],this.selection=new re(!0,[]),this.dataSource2=new Y([]),this.date=new U(X()),this.toppings=new U(""),this.toppingList=["Extra cheese","Mushroom","Onion","Pepperoni","Sausage","Tomato"],this.hoteles=[]}ngOnInit(){this.mes=X().month(),this.anio=X().year(),this.getReportes(),this.getHoteles()}setMonthAndYear(e,n){let o=this.date.value;o.month(e.month()),o.year(e.year()),this.date.setValue(o),this.mes=this.date.value?.month(),this.anio=this.date.value?.year(),n.close()}getReportes(){let e={mes:this.mes+1,anio:this.anio,hotel:""};this._reporte.reportesFiltro(e).subscribe({next:n=>{this.dataSource2=new Y(n)},error:n=>{}})}getHoteles(){this._reporte.hotelesLista().subscribe({next:e=>{this.hoteles=e},error:e=>{}})}getRecord(e){this.router.navigate(["/reportesAlta/detalle",e.idReporte])}exportexcel(){let e="ExcelSheet.xlsx",n=document.getElementById("table"),o=F.table_to_sheet(n),d=F.book_new();F.book_append_sheet(d,o,"Sheet1"),Le(d,e)}exportData(){var e=this.selection._selected,n=[["EQUIPO","MARCA","MODELO","N\xB0 SERIE","\xC1REA","CRITICIDAD","HOTEL","OBSERVACI\xD3N","RECOMENDACIONES","COMENTARIO DE GERENCIA","CR\xCDTICO BAJO","CR\xCDTICO ALTO"]];e.forEach(o=>q(this,null,function*(){let d=0,_=0;for(var h=0;h<o.observaciones.length;++h){var c=[];d=o.observaciones[h].criticidad=="Bajo"?d+1:d,_=o.observaciones[h].criticidad=="Alto"?_+1:_,c.push(o.observaciones[h].equipo),c.push(o.observaciones[h].marca),c.push(o.observaciones[h].modelo),c.push(o.observaciones[h].numeroSerie),c.push(o.observaciones[h].area),c.push(o.observaciones[h].criticidad),c.push(o.hoteles.nombre),c.push(o.observaciones[h].observacion),c.push(o.observaciones[h].comentarios.map(x=>x.comentario+"/").toString()),c.push(""),n.push(c)}var c=[];c.push(""),c.push(""),c.push(""),c.push(""),c.push(""),c.push(""),c.push(),c.push(""),c.push(""),c.push(""),c.push(o.recomendaciones),c.push(d),c.push(_),n.push(c)})),this.exportToCsv("reporte.csv",n)}exportToCsv(e,n){for(var o=function(x){for(var N="",A=0;A<x.length;A++){var z=x[A]===null||x[A]===void 0?"":x[A].toString();x[A]instanceof Date&&(z=x[A].toLocaleString());var k=z.replace(/"/g,'""');k.search(/("|,|\n)/g)>=0&&(k='"'+k+'"'),A>0&&(N+=","),N+=k}return N+`
`},d="",_=0;_<n.length;_++)d+=o(n[_]);var h=new Blob(["\uFEFF"+d],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a");if(c.download!==void 0){var $e=URL.createObjectURL(h);c.setAttribute("href",$e),c.setAttribute("download",e),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}}isAllSelected(){let e=this.selection.selected.length,n=this.dataSource2.data.length;return e===n}toggleAllRows(){if(this.isAllSelected()){this.selection.clear();return}this.selection.select(...this.dataSource2.data)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:`${this.isAllSelected()?"deselect":"select"} all`}applyFilter(e){let n=e.target.value;this.dataSource2.filter=n.trim().toLowerCase()}buscar(){this.selection.clear(),this.hotelesSeleccionados="";let e=this.toppings.value;this.hotelesSeleccionados=e?e.map(o=>o.idHotel):"";let n={mes:this.mes+1,anio:this.anio,hotel:this.hotelesSeleccionados.toString()||""};this._reporte.reportesFiltro(n).subscribe({next:o=>{this.dataSource2=new Y(o)}})}},t=i;return(()=>{i.\u0275fac=function(n){return new(n||i)}})(),(()=>{i.\u0275cmp=G({type:i,selectors:[["app-sample-page"]],features:[Z([{provide:L,useClass:Ve,deps:[R,j]},{provide:R,useValue:"es-ES"},{provide:H,useValue:Et}])],decls:58,vars:11,consts:[[1,"cardWithShadow"],[1,"p-24"],[1,"d-flex","w-100"],[1,"row"],[1,"col"],["matInput","",3,"matDatepicker","formControl"],["matIconSuffix","",3,"for"],["startView","multi-year","panelClass","example-month-picker",3,"monthSelected"],["dp",""],["multiple","",3,"formControl"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary","matBadgePosition","before","matBadgeColor","accent",3,"click"],["mat-flat-button","","color","primary","matBadgePosition","before","matBadgeColor","accent",1,"m-l-auto",3,"click"],["class","col-lg-12",4,"ngIf"],[1,"col-lg-12"],[1,"table-responsive","m-t-16"],["id","table","mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","assigned"],["matColumnDef","name"],["matColumnDef","priority"],["matColumnDef","budget"],["matColumnDef","accion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"example-additional-selection"],[3,"value"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell",""],[1,"d-flex","align-items-center"],[1,"m-l-16"],[1,"mat-subtitle-1","f-s-14","f-w-600"],[1,"mat-body-1","f-s-12"],["mat-cell","",1,"mat-body-1"],[3,"ngIf"],[1,"bg-light-accent","text-accent","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-primary","text-primary","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-warning","text-warning","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-error","text-error","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-success","text-success","rounded","f-w-600","p-6","p-y-4","f-s-12"],["mat-header-row",""],["mat-row",""],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],[3,"checked","aria-label","click","change"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,o){if(n&1){let d=P();l(0,"mat-card",0)(1,"mat-card-content",1)(2,"div",2)(3,"section")(4,"div",3)(5,"div",4)(6,"mat-form-field")(7,"mat-label"),m(8,"Mes y A\xF1o"),r(),E(9,"input",5)(10,"mat-datepicker-toggle",6),l(11,"mat-datepicker",7,8),y("monthSelected",function(h){w(d);let c=B(12);return I(o.setMonthAndYear(h,c))}),r()()(),l(13,"div",4)(14,"mat-form-field")(15,"mat-label"),m(16,"Hoteles"),r(),l(17,"mat-select",9)(18,"mat-select-trigger"),m(19),s(20,je,2,2,"span",10),r(),s(21,Xe,2,2,"mat-option",11),r()()()(),l(22,"div",4)(23,"button",12),y("click",function(){return o.buscar()}),m(24," Buscar "),r(),l(25,"button",13),y("click",function(){return o.exportData()}),m(26," Exportar excel "),r()()()()()(),s(27,mt,24,3,"div",14),l(28,"div",15)(29,"mat-card",0)(30,"mat-card-content",1)(31,"mat-card-title"),m(32,"Recorridos"),r(),l(33,"div",16)(34,"table",17),g(35,18),s(36,ct,2,3,"th",19),s(37,dt,2,2,"td",20),C(),g(38,21),s(39,ut,2,0,"th",22),s(40,ft,2,1,"td",23),C(),g(41,24),s(42,ht,2,0,"th",22),s(43,_t,2,1,"td",23),C(),g(44,25),s(45,gt,2,0,"th",22),s(46,Ct,2,1,"td",23),C(),g(47,26),s(48,St,2,0,"th",22),s(49,vt,2,1,"td",23),C(),g(50,27),s(51,xt,2,0,"th",22),s(52,At,3,3,"td",23),C(),g(53,28),s(54,yt,2,0,"th",19),s(55,Mt,3,0,"td",20),C(),s(56,Dt,1,0,"tr",29),s(57,bt,1,0,"tr",30),r()()()()()}if(n&2){let d=B(12);p(9),u("matDatepicker",d)("formControl",o.date),p(1),u("for",d),p(7),u("formControl",o.toppings),p(2),f(" ",(o.toppings.value==null||o.toppings.value[0]==null?null:o.toppings.value[0].nombre)||""," "),p(1),u("ngIf",((o.toppings.value==null?null:o.toppings.value.length)||0)>1),p(1),u("ngForOf",o.hoteles),p(6),u("ngIf",!1),p(7),u("dataSource",o.dataSource2),p(22),u("matHeaderRowDef",o.displayedColumns),p(1),u("matRowDefColumns",o.displayedColumns)}},dependencies:[ee,te,le,Ie,Re,ke,Oe,fe,de,ue,Pe,_e,he,ge,Se,Ce,ce,ve,Ae,be,ye,xe,Ee,Me,De,Te,we,pe,se,me,ie,ne],styles:[".mat-column-assigned[_ngcontent-%COMP%]{max-width:80px!important;min-width:80px!important}.mat-column-name[_ngcontent-%COMP%]{max-width:100px!important;min-width:100px!important}"]})})(),t})();export{Fe as a,j as b,Ve as c,Et as d,li as e};
