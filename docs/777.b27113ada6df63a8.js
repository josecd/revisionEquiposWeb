"use strict";(self.webpackChunkrevisionEquipos=self.webpackChunkrevisionEquipos||[]).push([[777],{6777:(L,P,r)=>{r.d(P,{G:()=>I,k:()=>Te});var m=r(5861),e=r(5879),E=r(2787),Z=r(729),u=r(1486),S=r(8337),i=r(5313),d=r(6223),D=r(6676),y=r(3445),C=r(3680),v=r(6814),Y=r(5986),b=r(8034),M=r(9157),B=r(2032),O=r(8525),R=r(5195),w=r(2296);function k(t,n){if(1&t&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.AsE(" (+",((null==o.toppings.value?null:o.toppings.value.length)||0)-1," ",2===(null==o.toppings.value?null:o.toppings.value.length)?"otro":"otros",") ")}}function Q(t,n){if(1&t&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o),e.xp6(1),e.Oqu(o.nombre)}}function J(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Assigned "),e.qZA())}function K(t,n){if(1&t&&(e.TgZ(0,"td",35)(1,"div",36)(2,"div",37)(3,"h6",38),e._uU(4),e.qZA(),e.TgZ(5,"span",39),e._uU(6),e.qZA()()()()),2&t){const o=n.$implicit;e.xp6(4),e.hij(" ",o.uname," "),e.xp6(2),e.hij(" ",o.position," ")}}function F(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," ID "),e.qZA())}function W(t,n){if(1&t&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.hij(" ",o.idReporte," ")}}function q(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Name "),e.qZA())}function $(t,n){if(1&t&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.hij(" ",o.productName," ")}}function j(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Priority "),e.qZA())}function H(t,n){if(1&t&&(e.TgZ(0,"span",42),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o.priority)," ")}}function G(t,n){if(1&t&&(e.TgZ(0,"span",43),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o.priority)," ")}}function V(t,n){if(1&t&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o.priority)," ")}}function X(t,n){if(1&t&&(e.TgZ(0,"span",45),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o.priority)," ")}}function z(t,n){if(1&t&&(e.TgZ(0,"span",46),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o.priority)," ")}}function ee(t,n){if(1&t&&(e.TgZ(0,"td",35),e.YNc(1,H,3,3,"ng-template",41),e.YNc(2,G,3,3,"ng-template",41),e.YNc(3,V,3,3,"ng-template",41),e.YNc(4,X,3,3,"ng-template",41),e.YNc(5,z,3,3,"ng-template",41),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.Q6J("ngIf","low"==o.priority),e.xp6(1),e.Q6J("ngIf","medium"==o.priority),e.xp6(1),e.Q6J("ngIf","high"==o.priority),e.xp6(1),e.Q6J("ngIf","critical"==o.priority),e.xp6(1),e.Q6J("ngIf","moderate"==o.priority)}}function te(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Budget "),e.qZA())}function oe(t,n){if(1&t&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.hij(" $",o.budget,"k ")}}function ne(t,n){1&t&&e._UZ(0,"tr",47)}function ae(t,n){1&t&&e._UZ(0,"tr",48)}function ie(t,n){if(1&t&&(e.TgZ(0,"div",15)(1,"mat-card",0)(2,"mat-card-content",1)(3,"mat-card-title"),e._uU(4,"Recorridos"),e.qZA(),e.TgZ(5,"div",16)(6,"table",33),e.ynx(7,24),e.YNc(8,J,2,0,"th",22),e.YNc(9,K,7,2,"td",20),e.BQk(),e.ynx(10,21),e.YNc(11,F,2,0,"th",22),e.YNc(12,W,2,1,"td",23),e.BQk(),e.ynx(13,25),e.YNc(14,q,2,0,"th",22),e.YNc(15,$,2,1,"td",23),e.BQk(),e.ynx(16,26),e.YNc(17,j,2,0,"th",22),e.YNc(18,ee,6,5,"td",20),e.BQk(),e.ynx(19,27),e.YNc(20,te,2,0,"th",22),e.YNc(21,oe,2,1,"td",23),e.BQk(),e.YNc(22,ne,1,0,"tr",29),e.YNc(23,ae,1,0,"tr",30),e.qZA()()()()()),2&t){const o=e.oxw();e.xp6(6),e.Q6J("dataSource",o.dataSource2),e.xp6(16),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns)}}function le(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"th",49)(1,"mat-checkbox",50),e.NdJ("change",function(s){e.CHM(o);const l=e.oxw();return e.KtG(s?l.toggleAllRows():null)}),e.qZA()()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("checked",o.selection.hasValue()&&o.isAllSelected())("indeterminate",o.selection.hasValue()&&!o.isAllSelected())("aria-label",o.checkboxLabel())}}function pe(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"td",35)(1,"mat-checkbox",51),e.NdJ("click",function(s){return s.stopPropagation()})("change",function(s){const _=e.CHM(o).$implicit,h=e.oxw();return e.KtG(s?h.selection.toggle(_):null)}),e.qZA()()}if(2&t){const o=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("checked",a.selection.isSelected(o))("aria-label",a.checkboxLabel(o))}}function re(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," ID "),e.qZA())}function se(t,n){if(1&t&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.hij(" ",o.idReporte," ")}}function ce(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Tipo "),e.qZA())}function _e(t,n){if(1&t&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.hij(" ",o.tipoReporte," ")}}function me(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Descripci\xf3n "),e.qZA())}function ue(t,n){if(1&t&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.hij(" ",o.descripcion," ")}}function de(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Hotel "),e.qZA())}function he(t,n){if(1&t&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.hij(" ",o.hoteles.nombre," ")}}function ge(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Fecha "),e.qZA())}function fe(t,n){if(1&t&&(e.TgZ(0,"td",40),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o.fechaRegistro)," ")}}function Ae(t,n){1&t&&(e.TgZ(0,"th",49),e._uU(1," Details "),e.qZA())}function Ce(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"td",35)(1,"button",52),e.NdJ("click",function(){const l=e.CHM(o).$implicit,_=e.oxw();return e.KtG(_.getRecord(l))}),e._uU(2,"Ver"),e.qZA()()}}function xe(t,n){1&t&&e._UZ(0,"tr",47)}function ve(t,n){1&t&&e._UZ(0,"tr",48)}const U=D,I={parse:{dateInput:"MM/YYYY"},display:{dateInput:"MM/YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let Te=(()=>{class t{constructor(){this._reporte=(0,e.f3M)(Z.c),this.router=(0,e.f3M)(E.F0),this.displayedColumns=["select","id","assigned","name","priority","budget","accion"],this.displayedColumnsReporte=["select","usuario","descripcion","hotel","fechaRegistro"],this.selection=new S.Ov(!0,[]),this.dataSource2=new i.by([]),this.date=new d.NI(U()),this.toppings=new d.NI(""),this.toppingList=["Extra cheese","Mushroom","Onion","Pepperoni","Sausage","Tomato"],this.hoteles=[]}ngOnInit(){this.mes=U().month(),this.anio=U().year(),this.getReportes(),this.getHoteles()}setMonthAndYear(o,a){const s=this.date.value;s.month(o.month()),s.year(o.year()),this.date.setValue(s),this.mes=this.date.value?.month(),this.anio=this.date.value?.year(),a.close()}getReportes(){this._reporte.reportesFiltro({mes:this.mes+1,anio:this.anio,hotel:""}).subscribe({next:a=>{this.dataSource2=new i.by(a)},error:a=>{}})}getHoteles(){this._reporte.hotelesLista().subscribe({next:o=>{this.hoteles=o},error:o=>{}})}getRecord(o){this.router.navigate(["/reportesAlta/detalle",o.idReporte])}exportexcel(){let a=document.getElementById("table");const s=u.P6.table_to_sheet(a),l=u.P6.book_new();u.P6.book_append_sheet(l,s,"Sheet1"),u.NC(l,"ExcelSheet.xlsx")}exportData(){var a=[["EQUIPO","MARCA","MODELO","N\xb0 SERIE","\xc1REA","CRITICIDAD","HOTEL","OBSERVACI\xd3N","RECOMENDACIONES","COMENTARIO DE GERENCIA","CR\xcdTICO BAJO","CR\xcdTICO ALTO"]];this.selection._selected.forEach(function(){var s=(0,m.Z)(function*(l){let _=0,h=0;for(var c=0;c<l.observaciones.length;++c)_="Bajo"==l.observaciones[c].criticidad?_+1:_,h="Alto"==l.observaciones[c].criticidad?h+1:h,(p=[]).push(l.observaciones[c].equipo),p.push(l.observaciones[c].marca),p.push(l.observaciones[c].modelo),p.push(l.observaciones[c].numeroSerie),p.push(l.observaciones[c].area),p.push(l.observaciones[c].criticidad),p.push(l.hoteles.nombre),p.push(l.observaciones[c].observacion),p.push(l.observaciones[c].comentarios.map(x=>x.comentario+"/").toString()),p.push(""),a.push(p);var p;(p=[]).push(""),p.push(""),p.push(""),p.push(""),p.push(""),p.push(""),p.push(),p.push(""),p.push(""),p.push(""),p.push(l.recomendaciones),p.push(_),p.push(h),a.push(p)});return function(l){return s.apply(this,arguments)}}()),this.exportToCsv("reporte.csv",a)}exportToCsv(o,a){for(var s=function(f){for(var x="",g=0;g<f.length;g++){var N=null==f[g]?"":f[g].toString();f[g]instanceof Date&&(N=f[g].toLocaleString());var T=N.replace(/"/g,'""');T.search(/("|,|\n)/g)>=0&&(T='"'+T+'"'),g>0&&(x+=","),x+=T}return x+"\n"},l="",_=0;_<a.length;_++)l+=s(a[_]);var h=new Blob(["\ufeff"+l],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a");if(void 0!==c.download){var p=URL.createObjectURL(h);c.setAttribute("href",p),c.setAttribute("download",o),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}}isAllSelected(){return this.selection.selected.length===this.dataSource2.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource2.data)}checkboxLabel(o){return o?`${this.selection.isSelected(o)?"deselect":"select"} row ${o.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}applyFilter(o){this.dataSource2.filter=o.target.value.trim().toLowerCase()}buscar(){this.selection.clear(),this.hotelesSeleccionados="";const o=this.toppings.value;this.hotelesSeleccionados=o?o.map(s=>s.idHotel):"";const a={mes:this.mes+1,anio:this.anio,hotel:this.hotelesSeleccionados.toString()||""};this._reporte.reportesFiltro(a).subscribe({next:s=>{this.dataSource2=new i.by(s)}})}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-sample-page"]],features:[e._Bn([{provide:C._A,useClass:y.t7,deps:[C.Ad,y.o8]},{provide:C.Ad,useValue:"es-ES"},{provide:C.sG,useValue:I}])],decls:58,vars:11,consts:[[1,"cardWithShadow"],[1,"p-24"],[1,"d-flex","w-100"],[1,"row"],[1,"col"],["matInput","",3,"matDatepicker","formControl"],["matIconSuffix","",3,"for"],["startView","multi-year","panelClass","example-month-picker",3,"monthSelected"],["dp",""],["multiple","",3,"formControl"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary","matBadgePosition","before","matBadgeColor","accent",3,"click"],["mat-flat-button","","color","primary","matBadgePosition","before","matBadgeColor","accent",1,"m-l-auto",3,"click"],["class","col-lg-12",4,"ngIf"],[1,"col-lg-12"],[1,"table-responsive","m-t-16"],["id","table","mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","assigned"],["matColumnDef","name"],["matColumnDef","priority"],["matColumnDef","budget"],["matColumnDef","accion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"example-additional-selection"],[3,"value"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell",""],[1,"d-flex","align-items-center"],[1,"m-l-16"],[1,"mat-subtitle-1","f-s-14","f-w-600"],[1,"mat-body-1","f-s-12"],["mat-cell","",1,"mat-body-1"],[3,"ngIf"],[1,"bg-light-accent","text-accent","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-primary","text-primary","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-warning","text-warning","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-error","text-error","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-success","text-success","rounded","f-w-600","p-6","p-y-4","f-s-12"],["mat-header-row",""],["mat-row",""],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],[3,"checked","aria-label","click","change"],["mat-raised-button","","color","primary",3,"click"]],template:function(o,a){if(1&o){const s=e.EpF();e.TgZ(0,"mat-card",0)(1,"mat-card-content",1)(2,"div",2)(3,"section")(4,"div",3)(5,"div",4)(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Mes y A\xf1o"),e.qZA(),e._UZ(9,"input",5)(10,"mat-datepicker-toggle",6),e.TgZ(11,"mat-datepicker",7,8),e.NdJ("monthSelected",function(_){e.CHM(s);const h=e.MAs(12);return e.KtG(a.setMonthAndYear(_,h))}),e.qZA()()(),e.TgZ(13,"div",4)(14,"mat-form-field")(15,"mat-label"),e._uU(16,"Hoteles"),e.qZA(),e.TgZ(17,"mat-select",9)(18,"mat-select-trigger"),e._uU(19),e.YNc(20,k,2,2,"span",10),e.qZA(),e.YNc(21,Q,2,2,"mat-option",11),e.qZA()()()(),e.TgZ(22,"div",4)(23,"button",12),e.NdJ("click",function(){return a.buscar()}),e._uU(24," Buscar "),e.qZA(),e.TgZ(25,"button",13),e.NdJ("click",function(){return a.exportData()}),e._uU(26," Exportar excel "),e.qZA()()()()()(),e.YNc(27,ie,24,3,"div",14),e.TgZ(28,"div",15)(29,"mat-card",0)(30,"mat-card-content",1)(31,"mat-card-title"),e._uU(32,"Recorridos"),e.qZA(),e.TgZ(33,"div",16)(34,"table",17),e.ynx(35,18),e.YNc(36,le,2,3,"th",19),e.YNc(37,pe,2,2,"td",20),e.BQk(),e.ynx(38,21),e.YNc(39,re,2,0,"th",22),e.YNc(40,se,2,1,"td",23),e.BQk(),e.ynx(41,24),e.YNc(42,ce,2,0,"th",22),e.YNc(43,_e,2,1,"td",23),e.BQk(),e.ynx(44,25),e.YNc(45,me,2,0,"th",22),e.YNc(46,ue,2,1,"td",23),e.BQk(),e.ynx(47,26),e.YNc(48,de,2,0,"th",22),e.YNc(49,he,2,1,"td",23),e.BQk(),e.ynx(50,27),e.YNc(51,ge,2,0,"th",22),e.YNc(52,fe,3,3,"td",23),e.BQk(),e.ynx(53,28),e.YNc(54,Ae,2,0,"th",19),e.YNc(55,Ce,3,0,"td",20),e.BQk(),e.YNc(56,xe,1,0,"tr",29),e.YNc(57,ve,1,0,"tr",30),e.qZA()()()()()}if(2&o){const s=e.MAs(12);e.xp6(9),e.Q6J("matDatepicker",s)("formControl",a.date),e.xp6(1),e.Q6J("for",s),e.xp6(7),e.Q6J("formControl",a.toppings),e.xp6(2),e.hij(" ",(null==a.toppings.value||null==a.toppings.value[0]?null:a.toppings.value[0].nombre)||""," "),e.xp6(1),e.Q6J("ngIf",((null==a.toppings.value?null:a.toppings.value.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",a.hoteles),e.xp6(6),e.Q6J("ngIf",!1),e.xp6(7),e.Q6J("dataSource",a.dataSource2),e.xp6(22),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns)}},dependencies:[v.sg,v.O5,C.ey,Y.oG,b.Mq,b.hl,b.nW,M.KE,M.hX,M.R9,B.Nt,O.gD,O.$L,R.a8,R.dn,R.n5,w.lW,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,d.Fj,d.JJ,d.oH,v.rS,v.uU],styles:[".mat-column-assigned[_ngcontent-%COMP%]{max-width:80px!important;min-width:80px!important}.mat-column-name[_ngcontent-%COMP%]{max-width:100px!important;min-width:100px!important}"]}),t})()},729:(L,P,r)=>{r.d(P,{c:()=>Z});var m=r(5516),e=r(5879),E=r(9862);let Z=(()=>{class u{constructor(i){this._httpClient=i}getReportes(){return this._httpClient.get(m.N.API_URL+"/reportes")}getReporteID(i){return this._httpClient.get(m.N.API_URL+`/reportes/${i}/alto`)}verPDF(i,d){let A;"Recorrido"==d?A=m.N.API_URL+"/reportes/pdf/view/"+i:"Baja"==d?A=m.N.API_URL+"/reportes/pdf/view/"+i+"/Baja":"Mantenimiento"==d&&(A=m.N.API_URL+"/reportes/pdf/view/"+i+"/Mantenimiento"),window.open(A,"_blank")}descargarPDF(i){window.open(m.N.API_URL+`/reportes/${i}/pdfReporte`,"_blank")}hotelesLista(){return this._httpClient.get(m.N.API_URL+"/hoteles")}reportesFiltro(i){return this._httpClient.post(m.N.API_URL+"/reportes/filter2",i)}reportesFiltroexs(i){return this._httpClient.post(m.N.API_URL+"/reportes/filterExcel",i)}}return u.\u0275fac=function(i){return new(i||u)(e.LFG(E.eN))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);